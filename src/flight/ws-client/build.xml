<project name="flight-ws-client" default="build" basedir=".">
    <!-- web service client build file -->

    <!-- before imports -->
    <property name="import-ant" value="../../import-ant" />

    <!-- IMPORTS -->
    <import file="${import-ant}/core.xml" />
    <import file="${import-ant}/library.xml" />
    <import file="${import-ant}/console-app.xml" />
    <import file="${import-ant}/hibernate.xml" />
    <import file="${import-ant}/${jax-ws-env}" />
    <import file="${import-ant}/jax-ws-client.xml" />

    <!-- after imports -->

    <!-- external XML resources -->
    <property name="jax.external.enabled" value="" />
    <path id="jax.external.path">
        <fileset dir="..">
            <include name="view/src/xml/*.*" />
            <include name="ws/src/xml/*.*" />
        </fileset>
    </path>

    <!-- external libraries -->
    <property name="jar.external.enabled" value="" />
    <path id="jar.external.path">
        <fileset dir="..">
            <include name="view/dist/*.jar" />
        </fileset>
    </path>

    <!-- classpaths -->
    <path id="compile.classpath">
        <path refid="project.lib.path" />
        <path refid="jax-ws.jars.path" />
        <path refid="jar.external.path" />
    </path>

    <path id="run.classpath">
        <pathelement location="${build.classes.rel-dir}" />
        <path refid="compile.classpath" />
    </path>

    <!-- library -->
    <!--- exclude configuration files from jar -->
    <property name="jar.excludes" value="*.properties,hibernate*,persistence*" />

    <!-- console application -->
    <!-- for testing purposes -->
    <property name="run.main-class" value="step.example.flight.ws.client.ConsoleClient" />

    <!-- web service client -->
    <property name="jax-ws-client.wsdl.file-name" value="flight.wsdl" />

    <target name="-replace-jax-ws-client-custom-tokens(dir)">
        <replace dir="${dir}" token="@jax-ws-client.handler-chains@">
            <replacevalue><![CDATA[
                <jws:handler-chains xmlns:jws="http://java.sun.com/xml/ns/javaee">
                    <jws:handler-chain>
                        <jws:handler>
                            <jws:handler-class>step.framework.extensions.Handler</jws:handler-class>
                        </jws:handler>
                    </jws:handler-chain>
                </jws:handler-chains>
            ]]></replacevalue>
        </replace>
    </target>

    <!-- build -->
    <target name="build"
            depends="config,build-database,build-jax-ws-client,build-library"
            description="Build the project">
    </target>

</project>
